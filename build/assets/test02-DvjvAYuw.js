import{u as j,v,w as Q,x as Z,y as Y,z as it,A as tt,B as q,C as ft,D as ut,E as lt,F as ht,G as yt,H as mt,I as pt,J as H,K as gt,L as nt,N as et,O as k,P as _,Q as C,R as M,S as xt,T as wt,U as dt,V as vt,W as D,X as bt,Y as At,Z as Xt,f as _t,_ as W,M as kt,$ as Ct,a0 as Mt,d as Lt,e as It,g as G,a1 as Tt,i as O,a2 as P,l as Ft,o as Dt,q as Et,a3 as Rt}from"./index-BgEAK4DP.js";function St(e,t){var n=0;return Float64Array.from(e,r=>n+=+r||0)}function E(e,t,n){return(t.length!==2?j(Q(e,t,n),([r,s],[o,c])=>v(s,c)||v(r,o)):j(Z(e,n),([r,s],[o,c])=>t(s,c)||v(r,o))).map(([r])=>r)}function rt(e,t=v){let n,r=!1;if(t.length===1){let s;for(const o of e){const c=t(o);(r?v(c,s)>0:v(c,c)===0)&&(n=o,s=c,r=!0)}}else for(const s of e)(r?t(s,n)>0:t(s,s)===0)&&(n=s,r=!0);return n}function $t(e={},t="x"){return it(e)?e:{...e,[t]:Y}}function zt(e,t){if(t.length===1)return{data:e,facets:t};const n=tt(e),r=new Uint8Array(n);let s=0;for(const a of t)for(const i of a)r[i]&&++s,r[i]=1;if(s===0)return{data:e,facets:t};e=q(e);const o=e[ft]=new Uint32Array(n+s);t=t.map(a=>q(a,Uint32Array));let c=n;r.fill(0);for(const a of t)for(let i=0,f=a.length;i<f;++i){const h=a[i];r[h]?(a[i]=c,e[c]=e[h],o[c]=h,++c):o[h]=h,r[h]=1}return{data:e,facets:t}}function Bt(e={},t={}){arguments.length===1&&([e,t]=Ut(e));const{y1:n,y:r=n,x:s,...o}=t,[c,a,i,f]=qt(r,s,"y","x",e,o);return{...c,y1:n,y:a,x1:i,x2:f,x:yt(i,f)}}function Kt({x:e,x1:t,x2:n,...r}={}){return r=ut(r,"y"),t===void 0&&n===void 0?Bt({x:e,...r}):([t,n]=lt(e,t,n),{...r,x1:t,x2:n})}function Ut(e){const{offset:t,order:n,reverse:r,...s}=e;return[{offset:t,order:n,reverse:r},s]}const jt={length:!0};function qt(e,t=ht,n,r,{offset:s,order:o,reverse:c},a){if(t===null)throw new Error(`stack requires ${r}`);const i=mt(a),[f,h]=pt(e),[u,m]=H(t),[l,p]=H(t);return u.hint=l.hint=jt,s=Ht(s),o=Ot(o,s,r),[gt(a,(y,w,g)=>{({data:y,facets:w}=zt(y,w));const I=e==null?void 0:h(wt(_(y,e),g==null?void 0:g[n])),R=_(y,t,Float64Array),S=_(y,i),$=o&&o(y,I,R,S),z=tt(y),b=m(new Float64Array(z)),A=p(new Float64Array(z)),B=[];for(const K of w){const T=I?Array.from(Z(K,d=>I[d]).values()):[K];if($)for(const d of T)d.sort($);for(const d of T){let U=0,F=0;c&&d.reverse();for(const x of d){const X=R[x];X<0?U=A[x]=(b[x]=U)+X:X>0?F=A[x]=(b[x]=F)+X:A[x]=b[x]=F}}B.push(T)}return s&&s(B,b,A,S),{data:y,facets:w}}),f,u,l]}function Ht(e){if(e!=null){if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"expand":case"normalize":return Wt;case"center":case"silhouette":return Gt;case"wiggle":return ot}throw new Error(`unknown offset: ${e}`)}}function st(e,t){let n=0,r=0;for(const s of e){const o=t[s];o<n&&(n=o),o>r&&(r=o)}return[n,r]}function Wt(e,t,n){for(const r of e)for(const s of r){const[o,c]=st(s,n);for(const a of s){const i=1/(c-o||1);t[a]=i*(t[a]-o),n[a]=i*(n[a]-o)}}}function Gt(e,t,n){for(const r of e){for(const s of r){const[o,c]=st(s,n);for(const a of s){const i=(c+o)/2;t[a]-=i,n[a]-=i}}ct(r,t,n)}at(e,t,n)}function ot(e,t,n,r){for(const s of e){const o=new et;let c=0;for(const a of s){let i=-1;const f=a.map(l=>Math.abs(n[l]-t[l])),h=a.map(l=>{i=r?r[l]:++i;const p=n[l]-t[l],y=o.has(i)?p-o.get(i):0;return o.set(i,p),y}),u=[0,...St(h)];for(const l of a)t[l]+=c,n[l]+=c;const m=k(f);m&&(c-=k(f,(l,p)=>(h[p]/2+u[p])*l)/m)}ct(s,t,n)}at(e,t,n)}function ct(e,t,n){const r=M(e,s=>M(s,o=>t[o]));for(const s of e)for(const o of s)t[o]-=r,n[o]-=r}function at(e,t,n){const r=e.length;if(r===1)return;const s=e.map(a=>a.flat()),o=s.map(a=>(M(a,i=>t[i])+xt(a,i=>n[i]))/2),c=M(o);for(let a=0;a<r;a++){const i=c-o[a];for(const f of s[a])t[f]+=i,n[f]+=i}}function Ot(e,t,n){if(e===void 0&&t===ot)return V(C);if(e!=null){if(typeof e=="string"){const r=e.startsWith("-"),s=r?dt:C;switch((r?e.slice(1):e).toLowerCase()){case"value":case n:return Pt(s);case"z":return Vt(s);case"sum":return Jt(s);case"appearance":return Nt(s);case"inside-out":return V(s)}return J(vt(e))}if(typeof e=="function")return(e.length===1?J:Qt)(e);if(nt(e))return Zt(e);throw new Error(`invalid order: ${e}`)}}function Pt(e){return(t,n,r)=>(s,o)=>e(r[s],r[o])}function Vt(e){return(t,n,r,s)=>(o,c)=>e(s[o],s[c])}function Jt(e){return L(e,(t,n,r,s)=>E(D(t),o=>k(o,c=>r[c]),o=>s[o]))}function Nt(e){return L(e,(t,n,r,s)=>E(D(t),o=>n[rt(o,c=>r[c])],o=>s[o]))}function V(e){return L(e,(t,n,r,s)=>{const o=D(t),c=E(o,u=>n[rt(u,m=>r[m])],u=>s[u]),a=Q(o,u=>k(u,m=>r[m]),u=>s[u]),i=[],f=[];let h=0;for(const u of c)h<0?(h+=a.get(u),i.push(u)):(h-=a.get(u),f.push(u));return f.reverse().concat(i)})}function J(e){return t=>{const n=_(t,e);return(r,s)=>C(n[r],n[s])}}function Qt(e){return t=>nt(t)?(n,r)=>e(t[n],t[r]):(n,r)=>e(t.get(n),t.get(r))}function Zt(e){return L(C,()=>e)}function L(e,t){return(n,r,s,o)=>{if(!o)throw new Error("missing channel: z");const c=new et(t(n,r,s,o).map((a,i)=>[a,i]));return(a,i)=>e(c.get(o[a]),c.get(o[i]))}}const Yt={ariaLabel:"bar"};class tn extends kt{constructor(t,n,r={},s=Yt){super(t,n,r,s),Ct(this,r),Mt(this,r)}render(t,n,r,s,o){const{rx:c,ry:a,rx1y1:i,rx1y2:f,rx2y1:h,rx2y2:u}=this,m=this._x(n,r,s),l=this._y(n,r,s),p=this._width(n,r,s),y=this._height(n,r,s);return Lt("svg:g",o).call(It,this,s,o).call(this._transform,this,n).call(w=>w.selectAll().data(t).enter().call(i||f||h||u?g=>g.append("path").call(G,this).call(Tt,m,l,N(m,p),N(l,y),this).call(O,this,r):g=>g.append("rect").call(G,this).attr("x",m).attr("width",p).attr("y",l).attr("height",y).call(P,"rx",c).call(P,"ry",a).call(O,this,r))).node()}_x(t,{x:n},{marginLeft:r}){const{insetLeft:s}=this;return n?o=>n[o]+s:r+s}_y(t,{y:n},{marginTop:r}){const{insetTop:s}=this;return n?o=>n[o]+s:r+s}_width({x:t},{x:n},{marginRight:r,marginLeft:s,width:o}){const{insetLeft:c,insetRight:a}=this,i=n&&t?t.bandwidth():o-r-s;return Math.max(0,i-c-a)}_height({y:t},{y:n},{marginTop:r,marginBottom:s,height:o}){const{insetTop:c,insetBottom:a}=this,i=n&&t?t.bandwidth():o-r-s;return Math.max(0,i-c-a)}}function N(e,t){return typeof e=="function"&&typeof t=="function"?n=>e(n)+t(n):typeof e=="function"?n=>e(n)+t:typeof t=="function"?n=>e+t(n):e+t}class nn extends tn{constructor(t,n={},r){const{x1:s,x2:o,y:c}=n;super(t,{x1:{value:s,scale:"x"},x2:{value:o,scale:"x"},y:{value:c,scale:"y",type:"band",optional:!0}},n,r)}_transform(t,n,{x:r}){t.call(_t,n,{x:r},0,0)}_x({x:t},{x1:n,x2:r},{marginLeft:s}){const{insetLeft:o}=this;return W(t)?s+o:c=>Math.min(n[c],r[c])+o}_width({x:t},{x1:n,x2:r},{marginRight:s,marginLeft:o,width:c}){const{insetLeft:a,insetRight:i}=this;return W(t)?c-s-o-a-i:f=>Math.max(0,Math.abs(r[f]-n[f])-a-i)}}function en(e,t={}){return bt(t)||(t={...t,y:At,x2:Y}),new nn(e,Kt(Xt($t(t))))}async function rn(){const t=await(await fetch("./alphabet.csv")).text(),n=Ft(t,Dt),r=Et({x:{axis:"top",grid:!0,percent:!0},marks:[Rt([0]),en(n,{x:"frequency",y:"letter",sort:{y:"x",reverse:!0}})]});document.getElementById("chart").innerHTML=r.outerHTML}rn();
