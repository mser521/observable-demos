import{M as T,s as A,m as $,a as M,p as I,b as P,c as _,d as D,e as H,f as L,g as F,t as R,h as g,i as W,n as j,j as q,k as z,l as B,o as E,q as N,r as X}from"./index-BgEAK4DP.js";const Y={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function G(n){return n.sort===void 0&&n.reverse===void 0?q({channel:"-r"},n):n}class J extends T{constructor(r,a={}){const{x:s,y:f,r:v,rotate:C,symbol:k=A,frameAnchor:o}=a,[c,e]=M(C,0),[p,i]=$(k),[h,b]=M(v,p==null?3:4.5);super(r,{x:{value:s,scale:"x",optional:!0},y:{value:f,scale:"y",optional:!0},r:{value:h,scale:"r",filter:I,optional:!0},rotate:{value:c,optional:!0},symbol:{value:p,scale:"auto",optional:!0}},G(a),Y),this.r=b,this.rotate=e,this.symbol=i,this.frameAnchor=P(o);const{channels:m}=this,{symbol:u}=m;if(u){const{fill:y,stroke:d}=m;u.hint={fill:y?y.value===u.value?"color":"currentColor":this.fill??"currentColor",stroke:d?d.value===u.value?"color":"currentColor":this.stroke??"none"}}}render(r,a,s,f,v){const{x:C,y:k}=a,{x:o,y:c,r:e,rotate:p,symbol:i}=s,{r:h,rotate:b,symbol:m}=this,[u,y]=_(this,f),d=m===A,x=e?void 0:h*h*Math.PI;return j(h)&&(r=[]),D("svg:g",v).call(H,this,f,v).call(L,this,{x:o&&C,y:c&&k}).call(S=>S.selectAll().data(r).enter().append(d?"circle":"path").call(F,this).call(d?w=>{w.attr("cx",o?t=>o[t]:u).attr("cy",c?t=>c[t]:y).attr("r",e?t=>e[t]:h)}:w=>{w.attr("transform",R`translate(${o?t=>o[t]:u},${c?t=>c[t]:y})${p?t=>` rotate(${p[t]})`:b?` rotate(${b})`:""}`).attr("d",e&&i?t=>{const l=g();return i[t].draw(l,e[t]*e[t]*Math.PI),l}:e?t=>{const l=g();return m.draw(l,e[t]*e[t]*Math.PI),l}:i?t=>{const l=g();return i[t].draw(l,x),l}:(()=>{const t=g();return m.draw(t,x),t})())}).call(W,this,s)).node()}}function K(n,{x:r,y:a,...s}={}){return s.frameAnchor===void 0&&([r,a]=z(r,a)),new J(n,{...s,x:r,y:a})}async function O(){const r=await(await fetch("./penguins.csv")).text(),a=B(r,E),s=N({grid:!0,inset:10,height:500,color:{legend:!0,legendWidth:100,legendHeight:100},marks:[X(),K(a,{x:"culmen_length_mm",y:"culmen_depth_mm",stroke:"species",r:8})]});document.getElementById("chart").innerHTML=s.outerHTML}O();
